Вы должны разработать Telegram-бота на базе aiogram 3, который взаимодействует с сервером, созданным с использованием FastAPI. Сервер предоставляет API для управления поведением бота.

Функциональные требования

Telegram-бот:

Меню команд:

/start — Приветственное сообщение и инструкции по работе с ботом.

/show_tasks — Показывает список задач, полученных от API.

/add_task — Позволяет пользователю добавить новую задачу (с использованием машины состояний).

/delete_task — Позволяет удалить задачу по её ID.



Машина состояний: Реализуйте машину состояний для команды /add_task. Пользователь вводит:

Название задачи.

Дедлайн задачи (в формате ДД.ММ.ГГГГ).

После успешного ввода данных бот отправляет запрос к серверу, чтобы сохранить задачу.



Клавиатуры:

Реализуйте инлайн-кнопки для удаления задач в команде /delete_task.

Каждая кнопка отображает ID задачи и вызывает обработчик удаления.



FastAPI сервер:

Эндпоинты:

GET /tasks — Возвращает список всех задач.

POST /tasks — Добавляет новую задачу.

Тело запроса:

json

{

  "name": "Название задачи",

  "deadline": "ДД.ММ.ГГГГ"

}

DELETE /tasks/{task_id} — Удаляет задачу по ID.



Хранилище: 

Реализуйте базу данных SQLite с таблицей tasks для хранения задач.



Пример:

Пользователь вводит /add_task.

Бот: "Введите название задачи."

Пользователь: "Сделать отчет."

Бот: "Введите дедлайн (ДД.ММ.ГГГГ)."

Пользователь: "25.11.2024"

Бот отправляет запрос на сервер и подтверждает добавление.



При выполнении /show_tasks бот получает список задач от API:

1. Сделать отчет (дедлайн: 25.11.2024)

2. Купить продукты (дедлайн: 20.11.2024)



При выполнении /delete_task бот выводит инлайн-кнопки:

[Удалить 1] [Удалить 2]
